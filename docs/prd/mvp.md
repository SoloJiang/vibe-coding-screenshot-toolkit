# 交互式截图工具 MVP 产品需求文档

版本：v0.1-MVP (交互式截图专版)

## 1. 目标
提供基于交互式区域选择的截图工具，支持多显示器环境，验证核心架构与用户体验。

## 2. 范围 (In Scope)
| 域 | 功能 | 描述 | 验收要点 |
|----|------|------|----------|
| 交互截图 | 启动选择界面 | 显示覆盖所有显示器的选择覆盖层 | GUI 界面正常启动并覆盖所有屏幕 |
| 交互截图 | 区域选择 | 用户通过鼠标拖拽选择截图区域 | 支持任意矩形区域选择，实时预览 |
| 交互截图 | 区域调整 | 选择后可调整区域边界 | 支持拖拽边框/角落精确调整 |
| 交互截图 | 图像捕获 | 获取用户选择区域的高质量图像 | 返回无损 RGBA 图像数据 |
| 多显示器 | 显示器检测 | 自动识别所有连接的显示器 | 正确获取显示器数量、边界和属性 |
| 多显示器 | 跨屏界面 | 选择界面覆盖多个显示器 | 每个显示器都有完整选择界面 |
| 多显示器 | 坐标处理 | 正确处理多显示器坐标系统 | 截图坐标准确无误 |
| 导出 | PNG 保存 | 将截图保存为 PNG 文件 | 文件存在且质量良好 |
| 导出 | 剪贴板复制 | 复制截图到系统剪贴板 | 可在其他应用中粘贴 |
| 导出 | 智能命名 | 基于时间模板自动命名文件 | 格式：Screenshot-YYYYMMDD-HHmmss-seq.png |
| CLI | capture-interactive | 启动交互式截图命令 | 返回 0 且生成文件 |
| 用户体验 | 键盘控制 | ESC 取消，Enter 确认 | 快捷键响应及时 |
| 用户体验 | 视觉反馈 | 选中区域高亮，其他区域半透明 | 界面清晰易用 |

## 3. 非范围 (Out of Scope)
所有标注功能（矩形、箭头、文本等）、撤销/重做、图层管理、历史记录、全屏截图、窗口截图、OCR、隐私模糊、JPEG 导出、上传功能、设置界面、快捷键自定义。

## 4. 关键规则
1. 启动延迟 < 500ms
2. 界面响应延迟 < 50ms
3. 截图处理时间 < 1s
4. 最小选择区域 4x4 像素
5. 命名序列号每日重置，同日递增
6. 支持相对路径和绝对路径输出目录

## 5. 错误处理
| 错误类型 | 场景 | 处理方式 |
|----------|------|----------|
| 权限不足 | 无屏幕录制权限 | 显示权限申请提示 |
| 保存失败 | 文件写入失败 | 显示错误信息，不影响剪贴板 |
| 用户取消 | ESC 键退出 | 优雅退出，无文件生成 |
| 显示器异常 | 无法检测显示器 | 使用默认显示器配置 |

## 6. 验收清单
1. ✅ CLI 命令 `capture-interactive` 可正常启动
2. ✅ 选择界面覆盖所有显示器
3. ✅ 鼠标拖拽可选择任意矩形区域
4. ✅ 选择区域可通过拖拽边框调整
5. ✅ Enter/双击确认选择并生成截图
6. ✅ ESC 键可取消操作
7. ✅ 生成高质量 PNG 文件
8. ✅ 截图自动复制到剪贴板
9. ✅ 文件命名符合时间模板格式
10. ✅ 支持多显示器环境
11. ✅ 错误情况下优雅处理

## 7. 性能指标
- 界面启动延迟 < 500ms
- 选择操作响应 < 50ms
- 截图处理完成 < 1s (1080p 显示器)
- 内存使用 < 100MB

## 8. 后续扩展计划
- v0.2: 增强多显示器体验（跨屏选择、显示器边界可视化）
- v0.3: Windows 平台支持
- v1.0: 高级配置选项和 API 接口


