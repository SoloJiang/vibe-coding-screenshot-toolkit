# Screenshot Toolkit

> A high-performance cross-platform screenshot tool with interactive region selection and multi-monitor support.

ğŸ¤– **AI-Generated Project**: This entire codebase is generated and driven by AI, demonstrating the power of AI-assisted development workflows.

[ä¸­æ–‡æ–‡æ¡£ README.zh-CN.md](./README.zh-CN.md)

[![CI](https://github.com/SoloJiang/vibe-coding-screenshot-toolkit/actions/workflows/ci.yml/badge.svg)](https://github.com/SoloJiang/vibe-coding-screenshot-toolkit/actions/workflows/ci.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Rust](https://img.shields.io/badge/rust-1.70+-orange.svg)](https://www.rust-lang.org)

## âœ¨ Features

### ğŸ¤– AI-Driven Development
This project showcases the capabilities of AI-assisted software development:
- **Complete Code Generation**: All Rust code, architecture, and implementation generated by AI
- **AI-Guided Workflow**: Development process entirely driven by AI planning and execution
- **Intelligent Problem Solving**: Complex technical challenges solved through AI reasoning
- **Automated Documentation**: Technical docs, PRD, and TODO management handled by AI

### ğŸ¯ Core Capabilities (v0.1 - Current)
- **ğŸ–±ï¸ Interactive Region Selection**: Custom GUI overlay with mouse drag selection
- **ğŸ–¥ï¸ Multi-Monitor Support**: Full cross-monitor area selection with virtual desktop coordinates
- **âš¡ Metal GPU Acceleration**: Native macOS Metal rendering with 60 FPS performance
- **ğŸ“¸ Smart Screenshot Strategy**: Optimized single-monitor cropping vs cross-monitor composition
- **ğŸ’¾ High-Quality Export**: PNG output with system clipboard integration
- **ğŸ·ï¸ Smart Naming**: Time-based templates with sequence numbering
- **ğŸ›¡ï¸ Robust Error Handling**: User-friendly permission and error messages

### ğŸš€ Coming Soon (v0.2)
- **âœï¸ Annotation Tools**: Rectangle, arrow, and freehand drawing tools
- **ğŸ¨ Real-time Editing**: Live preview with undo/redo support
- **ğŸ›ï¸ Toolbar UI**: Intuitive editing interface
- **ğŸ¨ Style Customization**: Color picker and stroke width controls

## ğŸš€ Quick Start

### Installation

```bash
# Clone the repository
git clone https://github.com/SoloJiang/vibe-coding-screenshot-toolkit.git
cd screenshot

# Build the project
cargo build --workspace

# Run tests
cargo test --workspace
```

### Basic Usage

**Interactive Screenshot** (Primary feature):
```bash
# Basic interactive screenshot
cargo run -p api_cli -- capture-interactive

# Specify output directory
cargo run -p api_cli -- capture-interactive -d ~/Screenshots

# Copy to clipboard simultaneously
cargo run -p api_cli -- capture-interactive --clipboard

# Custom filename template
cargo run -p api_cli -- capture-interactive -t "MyShot-{date:yyyyMMdd-HHmmss}"
```

**Command Line Options**:
```bash
cargo run -p api_cli -- capture-interactive --help
```

### Multi-Monitor Environment

- **Auto-Detection**: Automatically detects all connected monitors
- **Cross-Monitor Selection**: Select areas spanning multiple displays
- **Virtual Desktop Coordinates**: Unified coordinate mapping system
- **Smart Rendering**: Optimized performance for single vs multi-monitor scenarios

## ğŸ—ï¸ Architecture

```
crates/
â”œâ”€â”€ core/           # Core data models, error types, naming templates
â”œâ”€â”€ platform_mac/   # macOS implementation (xcap + Metal GPU)
â”œâ”€â”€ platform_win/   # Windows implementation (framework ready)
â”œâ”€â”€ ui_overlay/     # Interactive region selector with Metal rendering
â”œâ”€â”€ services/       # Business logic: capture, export, annotation services
â”œâ”€â”€ renderer/       # CPU rendering engine (fallback)
â”œâ”€â”€ api_cli/        # Command-line interface
â””â”€â”€ infra/          # Infrastructure: metrics, caching, utilities
```

## ğŸ® User Guide

### Interactive Screenshot Workflow

1. **Launch**: Run `capture-interactive` command
2. **Select Area**:
   - Left-click and drag to select rectangular region
   - Supports cross-monitor area selection
   - Use `Shift` for square selection, `Alt` for center-stretch
3. **Adjust**: Drag borders to fine-tune selection
4. **Confirm**: Press `Enter` or `Space` to capture
5. **Cancel**: Press `Esc` to abort
6. **Export**: Automatically saves to file and optionally copies to clipboard

### File Naming Templates

Supported variables:
- `{date:format}` - Date/time formatting
  - `{date:yyyyMMdd}` â†’ 20240922
  - `{date:yyyyMMdd-HHmmss}` â†’ 20240922-143022
- `{seq}` - Daily sequence number (resets daily)

Example: `Screenshot-{date:yyyyMMdd-HHmmss}-{seq}` â†’ `Screenshot-20240922-143022-001.png`

### macOS Permissions

First-time usage requires screen recording permission:
1. Open "System Preferences" â†’ "Security & Privacy" â†’ "Privacy"
2. Select "Screen Recording"
3. Click lock icon to unlock, check this application
4. Restart the application

## ğŸ”§ Technical Features

### High-Performance Rendering
- **Metal GPU Acceleration**: Native macOS Metal rendering for 60 FPS
- **CPU Fallback**: Software rendering for compatibility
- **Smart Caching**: Background caching and image reuse
- **Memory Optimization**: Arc sharing to avoid pixel data copying

### Multi-Monitor Architecture
- **Virtual Desktop System**: Unified coordinate mapping across displays
- **Smart Capture Strategy**:
  - Single monitor selection â†’ Direct crop (optimal performance)
  - Cross-monitor selection â†’ Virtual desktop composition
- **Real-time Preview**: Live selection feedback during interaction

### Cross-Platform Design
- **macOS**: Complete implementation with Metal GPU acceleration
- **Windows**: Framework ready, implementation in progress
- **Modular Architecture**: Platform-specific code isolated in platform modules

## ğŸ“‹ Development Roadmap

### v0.1 - Interactive Screenshot Core âœ…
- [x] Interactive region selection with custom GUI
- [x] Multi-monitor support and cross-monitor selection
- [x] Metal GPU rendering with 60 FPS performance
- [x] PNG export and clipboard integration
- [x] Smart file naming with time templates
- [x] Robust error handling and user guidance

### v0.2 - Annotation Editing System ğŸš§
- [ ] Toolbar UI with annotation tools
- [ ] Rectangle and arrow drawing tools
- [ ] Freehand drawing support
- [ ] Color picker and stroke customization
- [ ] Undo/redo functionality
- [ ] Real-time preview during editing

### v0.3 - Advanced Annotation Features ğŸ“‹
- [ ] Text annotation with font selection
- [ ] Mosaic and highlight tools
- [ ] Advanced editing features
- [ ] Annotation templates and presets

### v1.0 - Complete Product ğŸ¯
- [ ] Windows platform full support
- [ ] Global hotkey support
- [ ] Plugin system for custom tools
- [ ] History management interface
- [ ] Cloud sync capabilities

## ğŸ§ª Testing

```bash
# Run all tests
cargo test --workspace

# Run specific module tests
cargo test -p api_cli
cargo test -p platform_mac

# Build release version
cargo build --release
```

## ğŸ“Š Performance

- **Startup Time**: < 500ms
- **UI Response**: < 50ms
- **Screenshot Processing**: < 1s (4K resolution)
- **Memory Usage**: < 100MB (without annotation editing)
- **Rendering**: 60 FPS with Metal GPU acceleration

## ğŸ¤– AI Development Showcase

This project demonstrates the potential of AI-driven software development:

### AI-Generated Components
- **Complete Rust Codebase**: All 15+ crates and modules generated by AI
- **Architecture Design**: Modular, cross-platform architecture designed by AI
- **Performance Optimization**: Metal GPU rendering and 60 FPS optimization implemented by AI
- **Error Handling**: Comprehensive error handling and user guidance written by AI
- **Documentation**: Technical docs, PRD, and development tasks managed by AI

### AI Development Workflow
- **Planning**: AI analyzes requirements and creates detailed development plans
- **Implementation**: AI generates code, tests, and documentation
- **Problem Solving**: AI identifies and resolves complex technical challenges
- **Iteration**: AI continuously improves code quality and performance
- **Maintenance**: AI manages ongoing development and feature additions

## ğŸ¤ Contributing

This project welcomes contributions that explore AI-assisted development:
1. Follow the existing modular architecture and boundaries
2. All changes must pass the test suite
3. Update documentation for significant features
4. Follow [Rust coding standards](https://doc.rust-lang.org/1.0.0/style/)
5. Consider how AI can enhance the development process

## ğŸ“„ License

MIT License - See [LICENSE](./LICENSE) file for details

## ğŸ”— Documentation

- [Technical Design](./docs/tech_design/overview.md)
- [Product Requirements](./docs/prd/prd.md)
- [Development Tasks](./docs/todo/)

---

**Note**: This project currently focuses on the interactive screenshot core functionality. Annotation editing and advanced features are planned for future versions.